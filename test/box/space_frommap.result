-- box.tuple test
env = require('test_run')
---
...
test_run = env.new()
---
...
test_run:cmd("push filter ".."'\\.lua.*:[0-9]+: ' to '.lua...\"]:<line>: '")
---
- true
...
format = {}
---
...
format[1] = {name = 'aaa', type = 'unsigned'}
---
...
format[2] = {name = 'bbb', type = 'unsigned'}
---
...
format[3] = {name = 'ccc', type = 'unsigned'}
---
...
format[4] = {name = 'ddd', type = 'unsigned'}
---
...
subscriber = box.schema.space.create('subscriber', {format = format})
---
...
subscriber:frommap({ddd = 1, aaa = 2, ccc = 3, bbb = 4})
---
- [2, 4, 3, 1]
...
subscriber:frommap({ddd = 1, aaa = 2, bbb = 3})
---
- [2, 3, null, 1]
...
subscriber:frommap({ddd = 1, aaa = 2, ccc = 3, eee = 4})
---
- null
- Unknown field
...
subscriber:frommap()
---
- error: 'Usage: space:frommap(map, opts)'
...
subscriber:frommap({})
---
- []
...
subscriber:frommap({ddd = 1, aaa = 2, ccc = 3, bbb = 4}, {table = true})
---
- - 2
  - 4
  - 3
  - 1
...
subscriber:frommap({ddd = 1, aaa = 2, ccc = 3, bbb = 4}, {table = false})
---
- [2, 4, 3, 1]
...
subscriber:frommap({ddd = 1, aaa = 2, ccc = 3, bbb = box.NULL})
---
- [2, null, 3, 1]
...
subscriber:frommap({ddd = 1, aaa = 2, ccc = 3, bbb = 4}, {dummy = true})
---
- [2, 4, 3, 1]
...
_ = subscriber:create_index('primary', {parts={'aaa'}})
---
...
tuple = subscriber:frommap({ddd = 1, aaa = 2, ccc = 3, bbb = 4})
---
...
subscriber:replace(tuple)
---
- [2, 4, 3, 1]
...
subscriber:drop()
---
...
